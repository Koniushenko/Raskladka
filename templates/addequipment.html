<show-trip ></show-trip>
<a ui-sref="addMembers">Вернуться к личной информации, меню итд</a>
<br>
<button type="button" class="btn btn-primary" ng-disabled="regEquip.$invalid || !equipCtrl.members[0]" ng-click='equipCtrl.addEquip()'>Добавить снарягу</button>
<input type="submit" value="Дальше" ng-disabled="regEquip.$invalid || equipCtrl.isTimeOut() || equipCtrl.isDoubleEquip()" ng-click='equipCtrl.submit()' 
ui-sref='setProducts({fromDB: 0})'>
<br>


<!-- <button type="button" ng-disabled="regEquip.$invalid" class="btn btn-primary" ng-click='equipCtrl.submit()'>Сохранить</button> -->


<form name='regEquip' novalidate>
<table cellpadding="10" border="1" width="80%" >
<caption> Снаряжение</caption>
<thead>
<tr ng-if='equipCtrl.equipment.length'>
	<th>Какая снаряга</th> <th>Вес</th> <th>Берун</th> <th>Несун</th><th>Action</th>
</tr>
</thead>
<tbody>
<tr ng-repeat='eq in equipCtrl.equipment'>
	
	<td>
	<ng-form name='name'>
		<input type="text" class="form-control"   placeholder = "Снаряжение {{$index}}"	ng-model = 'eq.equipName' maxlength='20' />
	</ng-form>

	</td>
	
	<td>
	
	<input type="number" class="form-control" placeholder='вес в кг' ng-model='eq.equipWeight' 
	 pattern='^\d{1,2}([.]\d{1,2})?$' step='0.1' weight-valid min='0.1' max='20'/>
	
	</td> 	
	
	
	<td>
		<select name='berun' ng-model='eq.berun' required>
		  <option ng-repeat='member in equipCtrl.members' value="{{member.number.toString()}}" >{{member.name}}</option>
		</select>		
	</td>
	<td>
	    <select name="nesun" ng-model='eq.nesun' required>
		  <option ng-repeat='member in equipCtrl.members' value="{{member.number.toString()}}">{{member.name}}</option>
		</select>	
	</td>
	<td>
	<button type="button" class="btn btn-primary" ng-click='equipCtrl.removeEquip($index)'>Удалить</button>
	</td>

</tr>
</tbody>
</table>
</form>

<!-- <input type="submit" value="Сохранить все введенные данные" ng-disabled="regEquip.$invalid || equipCtrl.isTimeOut()" 
ng-show = 'equipCtrl.admin' ng-click='equipCtrl.submit(true)'> -->


<div ng-messages="regEquip.$error" style="color:red" role="alert">
    <!-- <div ng-message="required">Все поля обязательные!</div> -->
     <div ng-message="max">Вес не больше 20!</div>
     <div ng-message="number">Что-то не то с весом...</div>
    <div ng-message="weightValid">Формат веса выглядит странно</div>
    <!-- <div ng-message="pattern">Wrong pattern</div> -->   
    <div ng-message="min">Вес не меньше 100 грамм!</div>
</div>

<span ng-show='equipCtrl.isDoubleEquip()'>Одинаковая снаряга дважды на одном участнике!</span>

